<style scoped>
    .post h1 {
        margin-bottom: 0;
    }

    .date {
        margin: 0.7em 0 1em;
    }

    .divider:last-child {
        display: none;
    }

    .more-less {
        display: flex;
        justify-content: flex-end;
    }

    .more-less * {
        margin-left: 0.25em;
    }

    .more-less a {
        border-bottom: none;
    }

    .more-less a:not(.current) {
        cursor: pointer;
    }

    .more-less a.current {
        color: black;
    }
</style>

<div class="more-less">
    <a id="more" class="current" onclick="more()">more</a> <span>/</span> <a id="less" onclick="less()">less</a>
</div>
{{#posts}}
    <section class="post">
        <h1><a href="/blog/posts/{{url}}">{{title}}</a></h1>
        <div class="date">{{date}}</div>
        {{#has-tags}}
            <div class="tags">
                {{#tags}}
                    <a href="/blog/tags/{{.}}">#{{.}}</a>
                {{/tags}}
            </div>
        {{/has-tags}}
        {{{first_paragraph}}}
        <a class="read-more" href="/blog/posts/{{url}}">... read more</a>
    </section>
    <hr class="divider"/>
{{/posts}}

<script>
    function less() {
        document.querySelector('#more').classList.remove('current');
        document.querySelector('#less').classList.add('current');
        toggleClass('p, .read-more', 'hidden');
    }

    function more() {
        document.querySelector('#less').classList.remove('current');
        document.querySelector('#more').classList.add('current');
        toggleClass('p, a.read-more', 'hidden');
    }

    function toggleClass(query, className) {
        var elements = document.querySelectorAll(query);
        for (i = 0; i < elements.length; i++) {
            elements[i].classList.toggle(className);
        }
    }
</script>
